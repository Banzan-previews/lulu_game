import apple_1 from '../../assets/images/home/apple_1.png'
import apple_2 from '../../assets/images/home/apple_2.png'
import bag_1 from '../../assets/images/home/bag_1.png'
import bag_2 from '../../assets/images/home/bag_2.png'
import ball_1 from '../../assets/images/home/ball_1.png'
import ball_2 from '../../assets/images/home/ball_2.png'
import book_1 from '../../assets/images/home/book_1.png'
import book_2 from '../../assets/images/home/book_2.png'
import butter_1 from '../../assets/images/home/butter_1.png'
import butter_2 from '../../assets/images/home/butter_2.png'
import color_pencil_1 from '../../assets/images/home/color_pencil_1.png'
import color_pencil_2 from '../../assets/images/home/color_pencil_2.png'
import jam_1 from '../../assets/images/home/jam_1.png'
import jam_2 from '../../assets/images/home/jam_2.png'
import jelly_1 from '../../assets/images/home/jelly_1.png'
import jelly_2 from '../../assets/images/home/apple_2.png'
import juice_1 from '../../assets/images/home/juice_1.png'
import juice_2 from '../../assets/images/home/juice_2.png'
import milk_1 from '../../assets/images/home/milk_1.png'
import milk_2 from '../../assets/images/home/milk_2.png'
import peas_1 from '../../assets/images/home/peas_1.png'
import peas_2 from '../../assets/images/home/peas_2.png'
import pen_1 from '../../assets/images/home/pen_1.png'
import pen_2 from '../../assets/images/home/pen_2.png'
import pencil_1 from '../../assets/images/home/pencil_1.png'
import pencil_2 from '../../assets/images/home/pencil_2.png'
import soup_1 from '../../assets/images/home/soup_1.png'
import soup_2 from '../../assets/images/home/soup_2.png'
import tuna_1 from '../../assets/images/home/tuna_1.png'
import tuna_2 from '../../assets/images/home/tuna_2.png'


export const itemsList = [
    {
        "group_id": "grp0",
        "name": "item 0",
        "price": 11,
        "image": apple_1,
        "isExpensive": false,
        "diff": 4,
    },
    {
        "group_id": "grp0",
        "name": "item 1",
        "price": 15,
        "image": apple_2,
        "isExpensive": true,
        "diff": 4,
    },
    {
        "group_id": "grp1",
        "name": "item 2",
        "price": 142,
        "image": bag_1,
        "isExpensive": false,
        "diff": 17,
    },
    {
        "group_id": "grp1",
        "name": "item 3",
        "price": 159,
        "image": bag_2,
        "isExpensive": true,
        "diff": 17,
    },
    {
        "group_id": "grp2",
        "name": "item 4",
        "price": 17,
        "image": ball_1,
        "isExpensive": false,
        "diff": 6,
    },
    {
        "group_id": "grp2",
        "name": "item 5",
        "price": 23,
        "image": ball_2,
        "isExpensive": true,
        "diff": 6,
    },
    {
        "group_id": "grp3",
        "name": "item 6",
        "price": 4,
        "image": book_1,
        "isExpensive": false,
        "diff": 3,
    },
    {
        "group_id": "grp3",
        "name": "item 7",
        "price": 7,
        "image": book_2,
        "isExpensive": true,
        "diff": 3,
    },
    {
        "group_id": "grp4",
        "name": "item 8",
        "price": 8,
        "image": butter_1,
        "isExpensive": false,
        "diff": 7,
    },
    {
        "group_id": "grp4",
        "name": "item 9",
        "price": 15,
        "image": butter_2,
        "isExpensive": true,
        "diff": 7,
    },
    {
        "group_id": "grp5",
        "name": "item 10",
        "price": 12,
        "image": color_pencil_1,
        "isExpensive": false,
        "diff": 2,
    },
    {
        "group_id": "grp5",
        "name": "item 11",
        "price": 14,
        "image": color_pencil_2,
        "isExpensive": true,
        "diff": 2,
    },
    {
        "group_id": "grp6",
        "name": "item 12",
        "price": 10,
        "image": jam_1,
        "isExpensive": false,
        "diff": 17,
    },
    {
        "group_id": "grp6",
        "name": "item 13",
        "price": 27,
        "image": jam_2,
        "isExpensive": true,
        "diff": 17,
    },
    {
        "group_id": "grp7",
        "name": "item 14",
        "price": 4,
        "image": jelly_1,
        "isExpensive": false,
        "diff": 6,
    },
    {
        "group_id": "grp7",
        "name": "item 15",
        "price": 10,
        "image": jelly_2,
        "isExpensive": true,
        "diff": 4,
    },
    {
        "group_id": "grp8",
        "name": "item 16",
        "price": 12,
        "image": juice_1,
        "isExpensive": false,
        "diff": 3,
    },
    {
        "group_id": "grp8",
        "name": "item 17",
        "price": 15,
        "image": juice_2,
        "isExpensive": true,
        "diff": 3,
    },
    {
        "group_id": "grp9",
        "name": "item 18",
        "price": 3,
        "image": milk_1,
        "isExpensive": false,
        "diff": 2,
    },
    {
        "group_id": "grp9",
        "name": "item 19",
        "price": 5,
        "image": milk_2,
        "isExpensive": true,
        "diff": 2,
    },
    {
        "group_id": "grp10",
        "name": "item 20",
        "price": 10,
        "image": peas_1,
        "isExpensive": false,
        "diff": 11,
    },
    {
        "group_id": "grp10",
        "name": "item 21",
        "price": 21,
        "image": peas_2,
        "isExpensive": true,
        "diff": 11,
    },
    {
        "group_id": "grp11",
        "name": "item 22",
        "price": 2,
        "image": pen_1,
        "isExpensive": false,
        "diff": 2,
    },
    {
        "group_id": "grp11",
        "name": "item 23",
        "price": 4,
        "image": pen_2,
        "isExpensive": true,
        "diff": 2,
    },
    {
        "group_id": "grp12",
        "name": "item 24",
        "price": 4,
        "image": pencil_1,
        "isExpensive": false,
        "diff": 2,
    },
    {
        "group_id": "grp12",
        "name": "item 25",
        "price": 6,
        "image": pencil_2,
        "isExpensive": true,
        "diff": 2,
    },
    {
        "group_id": "grp13",
        "name": "item 26",
        "price": 9,
        "image": soup_1,
        "isExpensive": false,
        "diff": 4,
    },
    {
        "group_id": "grp13",
        "name": "item 27",
        "price": 13,
        "image": soup_2,
        "isExpensive": true,
        "diff": 4,
    },
    {
        "group_id": "grp14",
        "name": "item 28",
        "price": 5,
        "image": tuna_1,
        "isExpensive": false,
        "diff": 2,
    },
    {
        "group_id": "grp14",
        "name": "item 29",
        "price": 7,
        "image": tuna_2,
        "isExpensive": true,
        "diff": 2,
    },
];

var groupList = [];

var currentIndex = 0;
var currentGroupId = 0;
var totalSavings = 0;
var is100PercentSaved = false;

var userCart = [];

 function createGroupList() {
    groupList.length = 0;
    itemsList.forEach((value) => {
        if (!groupList.includes(value.group_id)) {
            groupList.push(value.group_id);
        }
    });
    shuffle(groupList);
    console.log("total ", groupList.length, " groups Found");
}

 function initializeDataController() {
    currentIndex = 0;
    currentGroupId = 0;
    totalSavings = 0;
    is100PercentSaved = false;
    userCart.length = 0;
    createGroupList();
}

function getProductIdsFromGroupIndex(index) {
    var _ids = [];
    const groupID = groupList[index];
    itemsList.forEach((value) => {
        if (value.group_id === groupID) {
            _ids.push(value.name);
        }
    });
    console.log("getProductIdsFromGroupIndex ",_ids);
    return shuffle(_ids);
}

 function getItemDataFromID(itemName) {
    return itemsList.find((value) => value.name == itemName);
    //return null;
}

async function addItemToCart(itemName) {
    if (!userCart.includes(itemName)) {
        userCart.push(itemName);
    }
    calculateTotalSavings();
    currentIndex = (currentIndex + 1) % groupList.length;
    currentGroupId = groupList[currentIndex];
}

async function calculateTotalSavings() {
    is100PercentSaved = true;
    totalSavings = 0;
    userCart.forEach((value) => {
        if (value.isExpensive) {
            is100PercentSaved = false;
        }
        else {
            totalSavings = totalSavings + value.price;
        }
    });
}

function shuffle(array) {
    var currentIndex = array.length, temporaryValue, randomIndex;

    // While there remain elements to shuffle...
    while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
    }

    return array;
}

export { totalSavings, is100PercentSaved, shuffle,getItemDataFromID ,initializeDataController,getProductIdsFromGroupIndex}

// Initialze must be called when app starts
//export default { initializeDataController, getProductIdsFromGroupID, getItemDataFromID, addItemToCart };